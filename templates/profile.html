{% extends "layout.html" %}
{% block title %}Your Profile{% endblock %}
{% block content %}
<div class="space-y-8">
    <!-- User Settings -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-2xl font-bold text-gray-100 mb-4">Your Settings</h2>
        <form action="{{ url_for('profile') }}" method="post" class="max-w-md">
            <div>
                <label for="location" class="block text-sm font-medium text-gray-300">Your Location (for Weather)</label>
                <input type="text" name="location" id="location" value="{{ current_user.location or '' }}" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md py-2 px-3" placeholder="e.g., London, UK">
            </div>
            <div class="mt-4">
                <button type="submit" class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg">Save Settings</button>
            </div>
        </form>
    </div>

    <!-- User Schedule Manager -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-2xl font-bold text-gray-100 mb-4">Your Schedule</h2>
        <form action="{{ url_for('profile') }}" method="post" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6">
            <div class="md:col-span-2">
                <label for="event_name" class="block text-sm font-medium text-gray-300">Event Name</label>
                <input type="text" name="event_name" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md py-2 px-3" required>
            </div>
            <div>
                <label for="start_hour" class="block text-sm font-medium text-gray-300">Start Time (24h)</label>
                <input type="number" step="0.5" name="start_hour" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md py-2 px-3" required>
            </div>
            <div>
                <label for="end_hour" class="block text-sm font-medium text-gray-300">End Time (24h)</label>
                <input type="number" step="0.5" name="end_hour" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md py-2 px-3" required>
            </div>
            <button type="submit" class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg md:col-start-4">Add Event</button>
        </form>
        <ul class="space-y-2">
            {% for event in schedule %}
            <li class="flex justify-between items-center p-3 bg-gray-900 rounded-lg">
                <span>{{ event.event_name }} ({{ "%.2f"|format(event.start_hour) }} - {{ "%.2f"|format(event.end_hour) }})</span>
                <a href="{{ url_for('delete_event', event_id=event.id) }}" class="text-rose-500 hover:text-rose-400">Delete</a>
            </li>
            {% else %}
            <li class="text-gray-400">Your schedule is empty.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Hobbies Manager -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-2xl font-bold text-gray-100 mb-4">Your Hobbies</h2>
        <form action="{{ url_for('profile') }}" method="post" class="flex gap-4 items-end mb-6">
            <div class="flex-grow">
                <label for="hobby_name" class="block text-sm font-medium text-gray-300">Hobby Name</label>
                <input type="text" name="hobby_name" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md py-2 px-3" required>
            </div>
            <button type="submit" class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg">Add Hobby</button>
        </form>
        <ul class="space-y-2">
            {% for hobby in hobbies %}
            <li class="p-3 bg-gray-900 rounded-lg"><span>{{ hobby.name }}</span></li>
            {% else %}
            <li class="text-gray-400">No hobbies listed.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Awarded Badges -->
    <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
        <h2 class="text-2xl font-bold text-gray-100 mb-4">Your Badges</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
            {% for badge in badges %}
            <div class="text-center" title="{{ badge.description }}">
                <div class="text-6xl">{{ badge.icon }}</div>
                <p class="mt-2 text-sm font-semibold">{{ badge.name }}</p>
            </div>
            {% else %}
            <p class="text-gray-400 col-span-full">No badges earned yet.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

